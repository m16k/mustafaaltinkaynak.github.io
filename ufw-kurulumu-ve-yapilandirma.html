<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Mustafa ALTINKAYNAK - UFW Kurulumu ve Yapılandırma</title>
        <meta name="description" content="" />

        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="shortcut icon" href="/assets/images/favicon.png">
        <link rel="stylesheet" type="text/css" href="/theme/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css"/>
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css"/>
        <link rel="stylesheet" type="text/css" href="/theme/css/monosocialiconsfont.css"/>
        <link rel="stylesheet" href="/theme/tipuesearch/tipuesearch.css">
        <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Mustafa ALTINKAYNAK Full Atom Feed" />
        <link href="/feeds/all.rss" type="application/rss+xml" rel="alternate" title="Mustafa ALTINKAYNAK Full RSS Feed" />
        <link href="/feeds/sistem-yoneticiligi.atom.xml" type="application/atom+xml" rel="alternate" title="Mustafa ALTINKAYNAK Categories Atom Feed" />

<meta name="tags" content="ufw kurulumu ve yapılandırma" />
<meta name="tags" content="ufw nedir" />
<meta name="tags" content="ufw ubuntu" />
<meta name="tags" content="ufw debian" />
    </head>
    <body class="home-template">
        <div class="container">
            <div class="col-md-10 col-md-offset-1 col-sm-12 col-xs-12">
<main class="content" role="main">
    <div class="row">
        <article class="post tag-play tag-security">
          <header class="post-header">
            <a class="blog-logo" href="/">
              <span class="blog-title">Mustafa ALTINKAYNAK</span>
            </a>
          </header>
           
            <h1 class="post-title">UFW Kurulumu ve Yapılandırma</h1>


            <section class="post-content">
              <h2>UFW nedir?</h2>
<p>UFW yani Uncomplicated Firewall güvenlik duvarı yönetim aracıdır. Iptables güvenlik duvarı yapılandırmasını kolaylaştırmak için geliştirilen ufw, ipv4 veya v6 ile desteğiyle birlikte kullanıcıların işini epeyi kolaylaştırmaktadır. Varsayılan olarak UFW devre dışı olarak gelmektedir. UFW'yi konsol üzerinden yönetebileceğiniz gibi GUI desteği sayesinde konsol kullanmadan <a href="https://help.ubuntu.com/community/Gufw">Gufw</a> ile de yönetebilirsiniz. Ubuntu için varsayılan güvenlik duvarı yapılandırma aracıdır.</p>
<h2>UFW kurulumu</h2>
<p>UFW ubuntu üzerinde varsayılan geldiğinden dolayı farklı bir işletim sistemi kuruyorsanız aşağıdaki adımı izleyebilirsiniz.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# apt-get install ufw</span>
</pre></div>


<p>Kurulum işleminin ardından aşağıdaki komut ile birlikte versiyon kontrolü sağlayabilirsiniz.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw version</span>
</pre></div>


<p><strong>ÖNEMLİ:</strong> Eğer ki ev kullanıcı iseniz UFW sizler için varsayılan bir profil ile birlikte sisteminize dahil olmaktadır. Kısacası, ev kullanıcıları için istisnalar dışında tüm gelen istekler reddedilmektedir.</p>
<h2>UFW yönetimi</h2>
<p>UFW'yi etkinleştirmek yada pasifleştirmek için aşağıdaki komutu kullanabilirsiniz.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw enable</span>
<span class="code-line">Firewall is active and enabled on system startup</span>
<span class="code-line"></span>
<span class="code-line">mustafa@altinkaynak:/# ufw disable</span>
<span class="code-line">Firewall stopped and disabled on system startup</span>
</pre></div>


<p>Mevcut UFW'ye ait kurallar dizisini görmek için aşağıdaki komutu kullanabilirsiniz.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw status verbose</span>
<span class="code-line">Status: active</span>
<span class="code-line">Logging: on (full)</span>
<span class="code-line">Default: deny (incoming), allow (outgoing), disabled (routed)</span>
<span class="code-line">New profiles: skip</span>
</pre></div>


<p>Henüz bir kural tanımlamadığımız kurallar dizisi görünmemektedir. Ancak UFW'nin mevcut durumuna ilişkin bilgi sahibi olabileceğimiz bilgiler yer almaktadır. Firewall'ın durumu, loglama hassasiyeti, ön tanımlı davranışını bu çıktı da yer almaktadır.</p>
<p>Kural içerikleri <strong>"/etc/ufw"</strong> altında <strong>".rules"</strong> uzantısı ile biten dosyalarda yer almaktadır.</p>
<h2>Kural oluşturma</h2>
<p>UFW üzerinde iki farklı davranış allow, deny belirleyebilirsiniz. Allow ile izin verebilir, deny ile gelen istekleri reddedebilirsiniz.</p>
<p>Allow içeren kurallar aşağıdaki şekilde tanımlanabilir.</p>
<div class="highlight"><pre><span class="code-line"><span></span>ufw allow &lt;port&gt;/&lt;optional: protocol&gt;</span>
</pre></div>


<p>53.port üzerine gelen TCP ve UDP bağlantılarına izin verelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow 53</span>
</pre></div>


<p>Yalnızca TCP üzerinden gelen bağlantılara izin vermek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow 53/tcp</span>
</pre></div>


<p>Yalnızca UDP üzerinden gelen bağlantılara izin vermek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow 53/tcp</span>
</pre></div>


<p>Deny içeren kurallar aşağıdaki şekilde tanımlanabilir.</p>
<div class="highlight"><pre><span class="code-line"><span></span>ufw deny &lt;port&gt;/&lt;optional: protocol&gt;</span>
</pre></div>


<p>53.port üzerine gelen TCP ve UDP bağlantılarını engelleyelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw deny 53</span>
</pre></div>


<p>Yalnızca TCP üzerinden gelen bağlantıları engellemek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw deny 53/tcp</span>
</pre></div>


<p>Yalnızca UDP üzerinden gelen bağlantıları engellemek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw deny 53/udp</span>
</pre></div>


<p>Belirli Subnet'e izin verelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow from 192.168.1.0/24</span>
</pre></div>


<p>Belirlenmiş bir IP adresine erişim izni verelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow from 10.50.1.55</span>
</pre></div>


<p>Belirlenmiş bir IP adresine yalnızca bir port için izin verelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow from 10.50.1.55 to any port 22</span>
</pre></div>


<p>RFC1918 adresleri yani 10.0.0.0/8, 172.16.0.0/12, 169.254.0.0/16, 192.168.0.0/16 olarak belirlenen adreslere izin verelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow from 10.0.0.0/8</span>
<span class="code-line">Rule added</span>
<span class="code-line">mustafa@altinkaynak:/# ufw allow from 172.16.0.0/12</span>
<span class="code-line">Rule added</span>
<span class="code-line">mustafa@altinkaynak:/# ufw allow from 192.168.0.0/16</span>
<span class="code-line">Rule added</span>
</pre></div>


<p>Bazı durumlarda kuralların birbirlerini bastırdığı durumlar olabilir. Örneğin: SSH bağlantılarını tümüyle kapatan bir kural eklediniz. Akabinde de spesifik bir adres için SSH izni verdiniz. Bu durumda ilk eklediğiniz kural gerçekleşecektir ve spesifik IP adresi bağlantı gerçekleştiremeyecektir.</p>
<p>Bu durumda araya kural eklemesi yapabilirsiniz.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw insert 1 allow from 10.50.1.55 to any port 22</span>
<span class="code-line">Rule inserted</span>
</pre></div>


<p>Belirli bir IP adresi veya subnet için protokol sınırlaması getirelim.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow from 10.50.1.55 to any port 22 proto tcp</span>
<span class="code-line">Rule added</span>
<span class="code-line"></span>
<span class="code-line">mustafa@altinkaynak:/# ufw allow from 192.168.0.0/16 to any port 22 proto tcp</span>
<span class="code-line">Rule added</span>
</pre></div>


<h2>Kural kaldırma</h2>
<p>UFW üzerinde kural kaldırmak için kural oluşturma sırasında yazmış olduğunuz koda delete eklemeniz yeterlidir.</p>
<p>80.porta gelen bağlantıları engellemek için,
    mustafa@altinkaynak:/# ufw deny 80/tcp</p>
<p>Belirlenen bu kuralı silmek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw delete deny 53/udp</span>
</pre></div>


<p>Yada tüm kurallar içerisinden belirlemiş olduğunuzu silmek istiyorsanız öncelikle aşağıdaki komutla kuralları numaralandırılmış halde listeleyin, ardından silmek istediğiniz kuralın numarasını ufw delete komutuna vermeniz yeterlidir.</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw status numbered</span>
<span class="code-line">Status: active</span>
<span class="code-line">To                         Action      From</span>
<span class="code-line">--                         ------      ----</span>
<span class="code-line">[ 1] 80/tcp                     DENY IN     Anywhere</span>
<span class="code-line">[ 2] 80/tcp (v6)                DENY IN     Anywhere (v6)</span>
<span class="code-line"></span>
<span class="code-line">mustafa@altinkaynak:/# ufw delete 1</span>
<span class="code-line">Deleting:</span>
<span class="code-line"> deny 80/tcp</span>
<span class="code-line">Proceed with operation (y|n)? y</span>
<span class="code-line">Rule deleted</span>
</pre></div>


<h2>Servisler için kural yazma</h2>
<p>UFW /etc/services dosyasını da okuyabildiği için hizmet adına göre de izin verebilir veya reddedebilirsiniz. Servislerin listesini görmek için <strong>"/etc/services"</strong> dosyasına göz atabilirsiniz.</p>
<p>Servis ismiyle bağlantıya izin verilen kurallar aşağıdaki şekilde tanımlanabilir.</p>
<div class="highlight"><pre><span class="code-line"><span></span>ufw allow &lt;service name&gt;</span>
</pre></div>


<p>SSH servisine bağlantılara izin vermek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw allow ssh</span>
<span class="code-line">Rule added</span>
<span class="code-line">Rule added (v6)</span>
</pre></div>


<p>Servis ismiyle bağlantının reddedildiği kurallar aşağıdaki şekilde tanımlanabilir.</p>
<div class="highlight"><pre><span class="code-line"><span></span>ufw deny &lt;service name&gt;</span>
</pre></div>


<p>SSH servisine bağlantıları reddetmek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw deny ssh</span>
<span class="code-line">Rule added</span>
<span class="code-line">Rule added (v6)</span>
</pre></div>


<h2>Loglama</h2>
<p>UFW loglama için farklı bir değer belirtilmedikçe "low" yani düşük seviye loglama işlemi yapmaktadır. Loglama konusunda hassas davranmak istiyorsanız aşağıdaki komutu 'off', 'low', 'medium', 'high' ve 'full' değerleriyle birlikte kullanabilirsiniz.</p>
<p>Log kaydetme seviyeleri yükseldikçe daha fazla çıktı üreterek, yoğunluğunuza göre diskinizi hızla doldurabilir. Production ortamlarda yapılacak olan seviye belirlemelerinde bunu göz önünde bulundurmalısınız.</p>
<p>Loglama işlemini devre dışı bırakmak için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw logging off</span>
<span class="code-line">Logging disabled</span>
</pre></div>


<p>En yüksek düzeyde loglama gerçekleştirmek için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw logging full</span>
<span class="code-line">Logging enabled</span>
</pre></div>


<p>Loglama işlemini tamamiyle devre dışı bırakmak için,</p>
<div class="highlight"><pre><span class="code-line"><span></span>mustafa@altinkaynak:/# ufw logging off</span>
<span class="code-line">Logging disabled</span>
</pre></div>


<p>Bir sonraki yazımda görüşmek dileğiyle.</p>
            </section>

            <footer class="post-footer">
                <section>
                  <span class="post-meta">
                    Tags:                     <a href="/tag/ufw-kurulumu-ve-yapilandirma.html">ufw kurulumu ve yapılandırma</a>,                     <a href="/tag/ufw-nedir.html">ufw nedir</a>,                     <a href="/tag/ufw-ubuntu.html">ufw ubuntu</a>,                     <a href="/tag/ufw-debian.html">ufw debian</a>                  </span>
                </section>

                <section class="share">
                    <h4>Share this post</h4>
                    <a class="icon-twitter" href="http://twitter.com/share?text=UFW Kurulumu ve Yapılandırma&url=/ufw-kurulumu-ve-yapilandirma.html"
                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                        <span class="hidden">Twitter</span>
                        <span class='symbol'>circletwitterbird</span>
                    </a>
                    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=/ufw-kurulumu-ve-yapilandirma.html"
                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                        <span class="hidden">Facebook</span>
                        <span class='symbol'>circlefacebook</span>
                    </a>
                    <a class="icon-google-plus" href="https://plus.google.com/share?url=/ufw-kurulumu-ve-yapilandirma.html"
                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                        <span class="hidden">Google+</span>
                        <span class='symbol'>circlegoogleplus</span>
                    </a>
                </section>

            </footer>

            <div id="disqus_thread"></div>
            <script>
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//mustafaaltinkaynak.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </article>
    </div>
</main>
                <footer class="site-footer">
                    <a class="subscribe icon-feed" href="/feeds/all.rss"><span class="tooltip"><span class="symbol">blip</span></span></a>
                    <a class="subscribe icon-feed" href="/archives.html"><span class="tooltip"><span class="symbol">star</span></span></a>
                    <div class="inner">
                         <section class="copyright">mustafaaltinkaynak &copy; 2017</section>
                    </div>
                </footer>

                <!-- Google Analitik -->
                <script>
                  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                  ga('create', 'UA-101755558-1', 'auto');
                  ga('send', 'pageview');

                </script>
                <!-- /Google Analitik -->


            </div>
        </div>
    </body>
</html>